<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Firebase Test</title>
</head>
<body>
<h2>Test Add Invite</h2>
<input id="kode" placeholder="Masukkan kode invite">
<button onclick="addInvite()">Tambah Kode</button>
<p id="msg"></p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyCkWKmK_UmQtk6UEIset5e6iPmFZj0ZLHc",
  authDomain: "bugemtoolsdb.firebaseapp.com",
  databaseURL: "https://bugemtoolsdb-default-rtdb.firebaseio.com",
  projectId: "bugemtoolsdb",
  storageBucket: "bugemtoolsdb.firebasestorage.app",
  messagingSenderId: "52270788635",
  appId: "1:52270788635:web:59bf1c23406beb872e48be",
  measurementId: "G-SHMYMXM4Z4"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.addInvite = async () => {
  const kode = document.getElementById("kode").value.trim();
  const msg = document.getElementById("msg");
  if(!kode){
    msg.innerText = "Kode kosong!";
    return;
  }

  try{
    await set(ref(db, 'invites/' + kode), { created: Date.now() });
    msg.innerText = "✅ Kode berhasil dibuat!";
  } catch(e){
    msg.innerText = "❌ Gagal menambahkan kode!";
    console.error(e);
  }
}
</script>
</body>
</html>
